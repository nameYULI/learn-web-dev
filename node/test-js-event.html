<!DOCTYPE html>
<html lang="zh-CN">

<head> </head>

<body>
  <div class="outer">
    <div class="inner"></div>
  </div>
  <button id="btn">click</button>
  <script>
    // Let's get hold of those elements
    var outer = document.querySelector('.outer');
    var inner = document.querySelector('.inner');

    // Let's listen for attribute changes on the
    // outer element
    new MutationObserver(function (mutations) {
      console.log('mutate', mutations.length);
    }).observe(outer, {
      attributes: true,
    });

    // Here's a click listener…
    function onClick() {
      console.log('click');

      setTimeout(function () {
        console.log('timeout');
      }, 0);

      Promise.resolve().then(function () {
        console.log('promise');
      });

      outer.setAttribute('data-random', Math.random());
    }

    // …which we'll attach to both elements 
    inner.addEventListener('click', onClick);
    outer.addEventListener('click', onClick);
    // ⚠️ 事件冒泡
    // 手动点击 inner 容器时 
    // click
    // promise
    // mutate
    // click
    // promise
    // mutate
    // timeout
    // timeout

    // 如果不在页面点击 box  而是执行 inner.click(); 代码呢？
    // click
    // click
    // promise
    // mutate
    // promise
    // timeout
    // timeout
    btn.addEventListener('click', () => {
      console.log('btn click');
      inner.click();
    });
  </script>
</body>

</html>